<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Doctor Search</title>

    <!-- Bootstrap core CSS -->
    <link href="../../styles/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="../../styles/doctor_style.css" rel="stylesheet">
	
	<!-- JavaScript files --
	<script src="../../scripts/main.js"></script>
	<script src="../../scripts/home-auth.js"></script>
	<script src="../../scripts/logout.js"></script> -->
	
	<!-- Table files -->
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script> 
	<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.js"></script>
	
	
	
	
	
	
	
  </head>

  <body>
	<header>
		   <img id="photo" src="../../efka.png" alt="efka">
		   <div class="float-right"><form class="form-signin"><button class="btn btn-warning btn-lg text-white" onclick="logOut()">Logout</button></form></div>
	</header>
	<div class="text-center">
		<br>
		<h2>Search for an appointment</h2>
		<br>
		
		<table border="0" cellspacing="5" cellpadding="5">
			<tbody>
			<tr>
				<td>Από: </td> 
				<td> <input type="text" id="min" name="min" /> </td>
				<td>Έως: </td> 
				<td> <input type="text" id="max" name="max" /> </td>
			</tr>
			
			</tbody>
		</table>
		
		<table id="DataTable" class="display" style="width:90%">
			
		</table>
		
		<br>
		
		<form class="form-signin">
			<button class="btn btn-lg btn-info btn-block" type="submit" formaction="./view_appointment.html">View appointment</button>
		</form>	
		
	</div>
	
	

	<script>
			
			function populateDataTable(appointments) {
    $("#appointments").append("<tbody>");
    jQuery.each(appointment, function(i,appointment){
        $("#appointments").append("<tr id='appRow" + appointment.date + "'><td>" + appointment.citizenName + "</td><td>" + appointment.id + "</td></tr>");
     });
     $("#appointments").append("</tbody>");

     $("#appointments tr").click(function() {
        loadAppointment($(this).children("td").html());
     });

    $('#appointments').DataTable();
}

function loadAppointment(id) {
    $.ajax({
        url: ROOT_PATH + "/appointments/" + id
    }).then(function(appointments) {
       $("input[name=date]").val(appointment.date);
       $("input[name=name]").val(appointment.citizenName);
       $("input[name=id]").val(appointment.time);
    });
};

$(document).ready(function() {

    $.ajax({
        url: ROOT_PATH + "/appointments"
    }).then(function(appointments) {
        populateDataTable(appointments);
    });

    $("#saveButton").on('click', function(event){
        event.preventDefault();
        alert("To be done...");
    });


	/*
    $("#deleteButton").on('click', function(event){
        event.preventDefault();
        let bookId = $("input[name=id]").val();
        $.ajax({
            url: ROOT_PATH + "/books/" + bookId,
            type : "DELETE",
            dataType : 'json',
            contentType: 'application/json',
                success : function(result) {
                    $("#bookRow" + bookId).remove();
                    $("input[name=id]").val("");
                    $("input[name=title]").val("");
                    $("input[name=isbn]").val("");
                },
                error: function(xhr, resp, text) {
                    console.log(xhr, resp, text);
                    alert("Could not delete book!");
                 }
         })

	}); */

	
});





	</script>

</body>
</html>

